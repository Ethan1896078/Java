package pers.ethan.homework;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.FilterInputStream;
import java.io.FilterOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

/**
 * Hello world!
 *
 */
public class App 
{
	static class EncodeInputStream extends FilterInputStream{

		protected EncodeInputStream(InputStream paramInputStream) {
			super(paramInputStream);
		}

		@Override
		public int read() throws IOException {
			int read = super.read();
			if (read == -1) {
				return -1;
			}
			byte reverse = (byte)~read;
			return reverse;
		}
	}
	
	static class DecodeOutputStream extends FilterOutputStream{

		public DecodeOutputStream(OutputStream paramOutputStream) {
			super(paramOutputStream);
		}

		@Override
		public void write(int paramInt) throws IOException {
			super.write(~paramInt);
		}
		
	}
	
    public static void main( String[] args )
    {
    	EncodeInputStream in = new EncodeInputStream(new ByteArrayInputStream("haha".getBytes()));
    	DecodeOutputStream out = new DecodeOutputStream(new ByteArrayOutputStream());
    	try {
    		int t = 0;
			while ((t = in.read()) != -1) {
//				System.out.println(t);
				out.write(t);
			}
			System.out.println(out);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
    }
    
    
}

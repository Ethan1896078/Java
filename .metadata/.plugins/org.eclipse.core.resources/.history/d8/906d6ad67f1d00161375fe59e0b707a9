package pers.ethan.homework;

import java.lang.reflect.Field;

public class DeepCopy {
	public static void main(String[] args) {
		C c = new C(3);
		B b = new B(2, c);
		A a = new A(1, b);
		
		// 已知数据结构，手动深复制
		A aCopy = deepCopyByManual(a);
		System.out.println(a);
		System.out.println(aCopy);
		add(aCopy);
		System.out.println(a);
		System.out.println(aCopy);
		
		// 编译时未知数据结构，利用（反射 + 递归）进行深复制，但是要求深复制的类必须包含午餐构造函数，限定太大。
		
		// 利用Serializeble进行深复制
		
	}
	
	public static A deepCopyByManual(A a){
		C cCopy = new C(a.b.c.cInt);
		B bCopy = new B(a.b.bInt, cCopy);
		A aCopy = new A(a.aInt, bCopy);
		return aCopy;
	}
	
	public static A deepCopyByReflection(A a){
		return null;
	}
	
	public static A deepCopyBySerializeble(A a){
		
	}
	
	public static void add(A a){
		a.aInt *= 10;
		a.b.bInt *= 10;
		a.b.c.cInt *= 10;
	}
	
}



class A{
	public int aInt;
	public B b;
	
	public A(int aInt, B b) {
		this.aInt = aInt;
		this.b = b;
	}
	
	@Override
	public String toString() {
		return "{aInt=" + aInt + ", b=" + b + "}";
	}
}

class B{
	public int bInt;
	public C c;
	
	public B(int bInt, C c) {
		this.bInt = bInt;
		this.c = c;
	}
	
	@Override
	public String toString() {
		return "[bInt=" + bInt + ", c=" + c + "]";
	}
}

class C{
	public int cInt;
	
	public C(int cInt){
		this.cInt = cInt;
	}
	
	@Override
	public String toString() {
		return "(cInt=" + cInt + ")";
	}
}


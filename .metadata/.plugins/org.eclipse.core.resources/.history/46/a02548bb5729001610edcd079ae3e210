package pers.ethan.homework;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FilterInputStream;
import java.io.FilterOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

/**
 * Hello world!
 *
 */
public class App 
{
	static class EncodeInputStream extends FilterInputStream{

		protected EncodeInputStream(InputStream paramInputStream) {
			super(paramInputStream);
		}

		@Override
		public int read() throws IOException {
			int read = super.read();
			if (read == -1) {
				return -1;
			}
			byte reverse = (byte)~read;
			return reverse;
		}
	}
	
	static class DecodeOutputStream extends FilterOutputStream{

		public DecodeOutputStream(OutputStream paramOutputStream) {
			super(paramOutputStream);
		}

		@Override
		public void write(int paramInt) throws IOException {
			out.write(~paramInt);
		}
		
	}
	
    public static void main( String[] args )
    {
//    	EncodeInputStream in = new EncodeInputStream(new ByteArrayInputStream("haha".getBytes()));
//    	DecodeOutputStream out = new DecodeOutputStream(new ByteArrayOutputStream());
    	EncodeInputStream encodeInputStream = null;
    	DecodeOutputStream decodeOutputStream = null;
    	FileOutputStream normalOut = null;
    	try {
    		encodeInputStream = new EncodeInputStream(new FileInputStream(new File("/Users/huangzhe/Documents/temp/text")));
    		decodeOutputStream = new DecodeOutputStream(new FileOutputStream(new File("/Users/huangzhe/Documents/temp/text2")));
    		int t = 0;
			while ((t = encodeInputStream.read()) != -1) {
				System.out.println(t);
				decodeOutputStream.write(t);
			}
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} finally {
			try {
				encodeInputStream.close();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			try {
				decodeOutputStream.close();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
    }
    
    
}
